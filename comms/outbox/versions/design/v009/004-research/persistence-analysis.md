# Persistence Analysis — v009

Only BL-057 introduces new persistent state. BL-060 wires an existing audit logger to an existing database. All other items are stateless wiring changes.

## BL-057: File-Based Logging with Rotation

### Storage Location
- **Path:** `logs/stoat-ferret.log` (and rotated variants `stoat-ferret.log.1`, `.2`, etc.)
- **Location:** Project root directory, relative to CWD
- **API:** Python stdlib `logging.handlers.RotatingFileHandler` — well-established, no custom API needed

### Multi-Project Implications
- **Not applicable.** This is a single-project log directory local to the application's working directory. Each project instance has its own `logs/` directory.

### Data Classification
- **Type:** System-managed, derived
- **Impact of loss:** Low. Log files are diagnostic — their loss does not affect application state or user data. They can be regenerated by re-running the application.

### Lifecycle
- **Created:** On first log write after application startup. `logs/` directory created by `configure_logging()` if absent.
- **Updated:** Continuously during application runtime via structlog/logging pipeline
- **Rotated:** Automatically by `RotatingFileHandler` at 10MB per file
- **Deleted:** Manual cleanup by operator. No automatic deletion beyond rotation.
- **Migration:** None. Log format changes are forward-only; old logs remain readable.

### Path Stability
- **Server restarts:** Stable — relative path from CWD, same as all other project paths
- **Project renames:** Stable — logs are in project directory, move with the project
- **Directory moves:** Stable — relative path, works from any CWD that is the project root

## BL-060: AuditLogger Wiring

### Note
AuditLogger writes to the existing SQLite database (`audit_log` table, created by `AuditLogger.__init__`). No new storage location is introduced — the database already exists and the table schema is defined in `db/audit.py`. The change is purely wiring: instantiating `AuditLogger` and passing it to repositories that already accept it as an optional parameter.

No persistence analysis required beyond noting that audit entries will now be created where previously none existed.

# Impact Table — v009

| # | Area | Description | Classification | Resulting Work Item | Caused By |
|---|------|-------------|----------------|---------------------|-----------|
| 1 | documentation | `docs/design/08-gui-architecture.md` line 60: "Known Limitation — SPA Fallback" paragraph describes the 404 behavior and workaround that BL-063 fixes. Must be removed or updated to reflect working SPA routing. | small | Remove "Known Limitation — SPA Fallback" paragraph from 08-gui-architecture.md | BL-063 |
| 2 | documentation | `docs/design/05-api-specification.md` lines 1501-1508: "Known Limitations > SPA Fallback for GUI Routes" section describes the same workaround. Must be removed once BL-063 is implemented. | small | Remove SPA fallback known limitation from 05-api-specification.md | BL-063 |
| 3 | documentation | `docs/design/05-api-specification.md` lines 1220-1230: GUI Static Files section claims `html=True` provides SPA routing ("non-file paths return index.html"). This is inaccurate — `html=True` does not handle SPA sub-route fallback. After BL-063, update to describe the actual fallback mechanism used. | small | Update GUI Static Files description in 05-api-specification.md to match implementation | BL-063 |
| 4 | documentation | `docs/design/05-api-specification.md` lines 382-399: List Projects response JSON does not include `total`, `limit`, `offset` pagination fields. After BL-064, the response will include proper pagination metadata. | small | Add pagination fields (total, limit, offset) to List Projects response example in 05-api-specification.md | BL-064 |
| 5 | gitignore | `.gitignore` has `*.log` (line 59) but no explicit `logs/` directory entry. BL-057 creates a `logs/` directory at project root. AC4 requires adding `logs/` to `.gitignore`. | small | Add `logs/` to .gitignore | BL-057 |
| 6 | caller-impact | `AsyncProjectRepository` protocol and implementations do NOT accept an `audit_logger` parameter (unlike `AsyncVideoRepository`). BL-060 AC2 requires "Database mutations produce audit log entries" — this implies project repositories need audit_logger support too. Without this, project CRUD operations will not produce audit entries. | substantial | Extend BL-060 scope: add audit_logger parameter to AsyncProjectRepository protocol and both implementations (SQLite + InMemory) | BL-060 |
| 7 | caller-impact | Route dependency functions create repositories without audit_logger. `projects.py:47` creates `AsyncSQLiteProjectRepository(request.app.state.db)` and `effects.py:74` creates `AsyncSQLiteProjectRepository(request.app.state.db)` — neither passes audit_logger. After BL-060 instantiates AuditLogger on app.state, these factory functions must pass it to repository constructors, or audit logging will be dead code (LRN-079 pattern). | substantial | Wire audit_logger from app.state into all repository factory/dependency functions across route handlers | BL-060 |
| 8 | caller-impact | Scan handler factory `make_scan_handler(video_repository)` does not receive ConnectionManager. BL-065 requires scan operations to broadcast SCAN_STARTED/SCAN_COMPLETED events, but the scan handler currently has no access to ws_manager. The handler function signature or its factory must be updated to include ws_manager. | small | Update make_scan_handler to accept and use ws_manager for broadcast calls | BL-065 |
| 9 | caller-impact | Pagination test assertions will break when BL-064 fixes the total count. `test_blackbox/test_edge_cases.py` `test_projects_pagination()` asserts `total == 2` based on the buggy len(projects) behavior. After fix, assertions must reflect true database count. Other tests creating small datasets will continue to pass. | small | Update pagination test assertions to expect true database total count | BL-064 |
| 10 | caller-impact | Video repository creation at `app.py:78` passes no audit_logger: `AsyncSQLiteVideoRepository(app.state.db)`. For BL-060 to be effective, this call must pass the new AuditLogger instance. Currently the only place audit_logger is exercised is `test_audit_logging.py`. | small | Pass AuditLogger to AsyncSQLiteVideoRepository in app.py lifespan | BL-060 |
